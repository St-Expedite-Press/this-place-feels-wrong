<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="description" content="St. Expedite Press portal — books, store, mission, lab, services, and contact." />
<meta name="theme-color" content="#050807" />
<meta name="color-scheme" content="dark" />
<meta property="og:site_name" content="St. Expedite Press" />
<meta property="og:type" content="website" />
<meta property="og:title" content="Portal &mdash; St. Expedite Press" />
<meta property="og:description" content="Books, store, mission, lab, services, and contact." />
<title>Portal &mdash; St. Expedite Press</title>

<link rel="icon" href="assets/img/favicon.svg" type="image/svg+xml" />
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600&family=Cormorant+Garamond:wght@300;400;600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="assets/css/hero-bar.css" />
<link rel="stylesheet" href="assets/css/footer.css" />

<style>
/* ====================================================================== */
/*  ROOT VARIABLES                                                        */
/* ====================================================================== */
:root {
  --green-base: #2aff8a;
  --green-1: rgba(42,255,138,0.22);
  --green-2: rgba(42,255,138,0.12);
  --green-3: rgba(42,255,138,0.06);

  --green-hot-1: rgba(42,255,138,0.75);
  --green-hot-2: rgba(42,255,138,0.55);
  --green-hot-3: rgba(42,255,138,0.38);
  --green-hot-4: rgba(42,255,138,0.22);

  --relief-base: #d96aff;

  --dark: #050807;
  --scan-warp: 0.4deg;
}

/* ====================================================================== */
/*  GLOBAL                                                                */
/* ====================================================================== */
body {
  margin: 0;
  min-height: 100vh;
  overflow: hidden;
  font-family: "Cormorant Garamond", serif;
  color: var(--green-base);

  /* Void engine + gradient mask composite background */
  background:
    linear-gradient(rgba(0,0,0,0.58), rgba(0,0,0,0.78)),
    url("assets/img/void_engine_twinkle_green.png");
  background-size: cover;
  background-position: center;
  background-attachment: fixed;
}

@media (max-width: 900px) {
  body { background-attachment: scroll; }
}

/* ====================================================================== */
/*  RESPONSIVE SURFACES                                                   */
/* ====================================================================== */
.portal-desktop { display: block; }
.portal-mobile { display: none; }

@media (max-width: 900px) {
  .portal-desktop { display: none; }
  .portal-mobile { display: block; }
}

.portal-mobile {
  height: 100vh;
  height: 100svh;
  height: 100dvh;
  overflow: hidden;
}

.portal-mobile .wrap {
  position: relative;
  z-index: 1;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  align-items: center;
  padding: clamp(calc(var(--hero-bar-height) + 6px), 3vh, 60px) 6vw 5vh;
  text-align: center;
}

.portal-mobile .mobile-fit {
  width: 100%;
  display: grid;
  grid-template-rows: auto 1fr auto;
  gap: clamp(.35rem, 1.2svh, .75rem);
  transform: scale(var(--mobile-fit-scale, 1));
  transform-origin: center center;
  will-change: transform;
}

.portal-mobile header { margin: 0; margin-top: clamp(-18px, -2svh, -6px); }

.portal-mobile .title {
  font-family: "Cinzel", serif;
  letter-spacing: clamp(0.10em, 0.8vw, 0.18em);
  font-size: clamp(1.6rem, 3.2vw, 3rem);
  text-transform: uppercase;
  text-shadow: -1px -1px 0 var(--relief-base), 0 0 12px var(--green-1);
  margin: 0;
  white-space: nowrap;
}

.portal-mobile .portal {
  width: min(44vh, 380px);
  height: min(44vh, 380px);
  margin: 0;
  border-radius: 50%;
  overflow: hidden;
  border: 3px solid var(--green-base);
  box-shadow: 0 0 18px var(--green-1), 0 0 44px var(--green-2), 0 0 92px var(--green-3);
  backdrop-filter: blur(4px) brightness(1.15) contrast(1.25);
}

.portal-mobile .portal img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  filter: brightness(1.05) contrast(1.2);
}

.portal-mobile .portal-stack {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: clamp(.6rem, 1.6svh, 1rem);
}

.portal-mobile .portal-link {
  font-family: "Cinzel", serif;
  font-size: clamp(1.4rem, 3.2vw, 2.6rem);
  letter-spacing: .22em;
  text-transform: uppercase;
  text-decoration: none;
  color: var(--green-base);
  opacity: .7;
  text-shadow: 0 0 10px var(--green-2), 0 0 22px var(--green-3);
  transition: opacity 150ms ease, filter 150ms ease, text-shadow 150ms ease;
}

.portal-mobile .portal-link:hover {
  opacity: 1;
  filter: brightness(1.35) contrast(1.2);
  text-shadow: 0 0 14px var(--green-1), 0 0 32px var(--green-2);
}

.portal-mobile .portal-link:focus-visible {
  outline: 2px solid var(--green-hot-1);
  outline-offset: 8px;
  border-radius: 8px;
}

.portal-mobile .thin-band {
  margin-top: 0;
  padding: 0;
  border-radius: 0;
  border: none;
  background: transparent;
  box-shadow: none;
  backdrop-filter: none;
}

.portal-mobile .thin-form {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: .5rem;
  flex-wrap: wrap;
  flex-direction: column;
}

.portal-mobile .thin-input {
  width: min(340px, 78vw);
  padding: .5rem .85rem;
  border-radius: 999px;
  border: 1px solid rgba(42,255,138,0.26);
  background: rgba(0,0,0,0.55);
  color: var(--green-base);
  font-family: "Cormorant Garamond", serif;
  font-size: 1.05rem;
  text-align: center;
  outline: none;
  box-shadow: 0 0 0 1px rgba(42,255,138,0.08);
}

.portal-mobile .thin-input::placeholder {
  color: rgba(42,255,138,0.6);
}

.portal-mobile .thin-input:focus-visible {
  border-color: rgba(42,255,138,0.55);
  box-shadow: 0 0 0 2px rgba(42,255,138,0.16);
}

.portal-mobile .thin-button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: .55rem .95rem;
  border-radius: 999px;
  border: 1px solid var(--green-hot-1);
  background: rgba(42,255,138,0.10);
  color: var(--green-base);
  text-decoration: none;
  letter-spacing: .14em;
  text-transform: uppercase;
  font-family: "Cinzel", serif;
  font-size: .78rem;
  cursor: pointer;
  align-self: center;
}

.portal-mobile .thin-helper {
  margin-top: 0.55rem;
  width: min(420px, 86vw);
  text-align: center;
  font-size: 0.92rem;
  line-height: 1.35;
  opacity: .92;
}

.portal-mobile .thin-helper__actions {
  margin-top: 0.45rem;
  display: flex;
  justify-content: center;
  gap: 0.55rem;
  flex-wrap: wrap;
}

.portal-mobile .thin-helper__link,
.portal-mobile .thin-helper__btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0.48rem 0.95rem;
  border-radius: 999px;
  border: 1px solid rgba(42,255,138,0.26);
  background: rgba(0,0,0,0.5);
  color: var(--green-base);
  text-decoration: none;
  letter-spacing: .14em;
  text-transform: uppercase;
  font-family: "Cinzel", serif;
  font-size: .74rem;
  cursor: pointer;
}

.portal-mobile .thin-helper__link:hover,
.portal-mobile .thin-helper__btn:hover {
  border-color: rgba(42,255,138,0.55);
  box-shadow: 0 0 14px rgba(42,255,138,0.16);
}

.portal-mobile .foot {
  text-align: center;
  opacity: .92;
  letter-spacing: .12em;
  font-size: .95rem;
  text-shadow: 0 0 10px var(--green-3);
}

.portal-mobile .splash__eyebrow {
  margin: 0;
  font-size: 1.1rem;
  letter-spacing: .15em;
  text-shadow:
    -1px -1px 0 var(--relief-base),
     0 0 8px var(--green-1),
     0 0 18px var(--green-2),
     0 0 28px var(--green-3);
}

.portal-mobile .lede {
  margin: 0.3rem auto;
  font-size: 1.45rem;
  max-width: 520px;
  opacity: .92;
  text-shadow: 0 0 9px var(--green-1);
}

.portal-mobile .divider {
  margin-top: .4rem;
  font-family: "Cinzel", serif;
  opacity: .7;
  text-shadow: 0 0 9px var(--green-2);
}

.portal-mobile .splash__foot {
  font-size: 1rem;
  opacity: .9;
  letter-spacing: .12em;
}

.portal-mobile .splash__foot a {
  color: var(--green-base);
  margin: 0 .6rem;
  text-decoration: none;
  text-shadow: 0 0 8px var(--green-1);
}

.portal-mobile .splash__foot a:hover {
  filter: brightness(1.25) contrast(1.1);
}

@media (prefers-reduced-motion: reduce) {
  .portal-mobile .portal-link { transition: none; }
}

@media (max-height: 680px) {
  .portal-mobile .wrap { padding: clamp(calc(var(--hero-bar-height) + 6px), 2vh, 52px) 4.5vw 3vh; }
  .portal-mobile .title {
    font-size: clamp(1.35rem, 3.8vw, 2.3rem);
    white-space: nowrap;
  }

  .portal-mobile .portal-stack { gap: .75rem; }
  .portal-mobile .portal { width: min(32vh, 250px); height: min(32vh, 250px); }
  .portal-mobile .portal-link { font-size: clamp(1.1rem, 3.2vw, 1.8rem); }

  .portal-mobile .thin-input { width: min(280px, 74vw); font-size: 1rem; }
  .portal-mobile .thin-button { padding: .52rem .85rem; font-size: .74rem; }

  .portal-mobile .foot { font-size: .85rem; letter-spacing: .10em; }
  .portal-mobile .splash__eyebrow { font-size: 0.95rem; }
  .portal-mobile .lede { font-size: 1.05rem; margin: 0.2rem auto; }
  .portal-mobile .divider { margin-top: .25rem; font-size: .9rem; }
  .portal-mobile .splash__foot { font-size: .9rem; }
}

@media (max-width: 480px) {
  .portal-mobile .wrap { padding: clamp(calc(var(--hero-bar-height) + 6px), 2vh, 52px) 4.5vw 3vh; }
  .portal-mobile .portal-stack { gap: .75rem; }
  .portal-mobile .portal-link { letter-spacing: .18em; }
  .portal-mobile .thin-form { gap: .45rem; flex-direction: row; }
}

@media (max-width: 600px) {
  .portal-mobile .wrap {
    padding-top: calc(clamp(24px, 7svh, 72px) + env(safe-area-inset-top));
    padding-bottom: calc(clamp(14px, 4svh, 32px) + env(safe-area-inset-bottom));
  }

  .portal-mobile .portal {
    width: clamp(190px, 34svh, 300px);
    height: clamp(190px, 34svh, 300px);
  }
}

/* ====================================================================== */
/*  FLASH ON LOAD                                                         */
/* ====================================================================== */
.portal-flash {
  position: fixed;
  inset: 0;
  background: #000;
  z-index: 300;
  animation: portal-flash 0.45s ease-out forwards;
}

@keyframes portal-flash {
  0%   { opacity: 1; background: #000; }
  50%  { opacity: .9; background: radial-gradient(circle, rgba(42,255,138,0.4), #000 80%); }
  100% { opacity: 0; visibility: hidden; }
}

/* ====================================================================== */
/*  TITLE                                                                 */
/* ====================================================================== */
.header-title {
  font-family: "Cinzel", serif;
  letter-spacing: .18em;
  font-size: clamp(2rem, 4vw, 3.2rem);
  text-align: center;
  margin-top: calc(2.5vh + var(--hero-bar-height));
  color: var(--green-base);
  text-shadow: -1px -1px 0 var(--relief-base), 0 0 12px var(--green-1);
  animation: title-breathe 12s ease-in-out infinite;
}

@keyframes title-breathe {
  0%, 100% { filter: brightness(1.2) contrast(2); }
  50%      { filter: brightness(1.6) contrast(2.6); }
}

/* ====================================================================== */
/*  PORTAL FRAME (GLITCH + DRIFT)                                         */
/* ====================================================================== */
.portal-frame {
  position: absolute;
  top: 46%;              /* lifted slightly to sit above the void “gravity center” */
  left: 50%;
  width: 40vh;
  height: 40vh;
  transform: translate(-50%, -50%);
  border-radius: 50%;
  overflow: hidden;
  z-index: 10;

  border: 3px solid var(--green-base);
  box-shadow:
    0 0 16px var(--green-1),
    0 0 36px var(--green-2),
    0 0 72px var(--green-3);

  backdrop-filter: blur(4px) brightness(1.2) contrast(1.3);
  will-change: transform;

  animation:
    portal-drift 22s ease-in-out infinite,
    portal-glitch-cycle 2.2s steps(2, end) infinite,
    portal-twinkle-sync 6.3s ease-in-out infinite alternate;
}

/* Slow oscillation (breathing rotation) */
@keyframes portal-drift {
  0%,100% { transform: translate(-50%, -50%) rotate(calc(var(--scan-warp) * -1)); }
  50%     { transform: translate(-50%, -50%) rotate(calc(var(--scan-warp) * 1)); }
}

/* Glitch spikes */
@keyframes portal-glitch-cycle {
  0%,95% { }
  96% {
    border-color: rgba(42,255,138,0.35);
    transform: translate(calc(-50% + 2px), calc(-50% - 1px)) skew(.4deg,-.6deg);
    box-shadow:
      0 0 6px var(--green-hot-2),
      0 0 20px var(--green-hot-3);
  }
  98% {
    transform: translate(calc(-50% - 3px), calc(-50% + 2px)) skew(-.3deg,.6deg);
  }
}

/* Subtle brightness sync as if portal is “sampling” the twinkling pavement */
@keyframes portal-twinkle-sync {
  0%, 92%  { filter: brightness(1.0) saturate(1.0); }
  93%,100% { filter: brightness(1.2) saturate(1.4); }
}

/* ====================================================================== */
/*  PORTAL NOISE LAYER                                                    */
/* ====================================================================== */
.portal-noise {
  position: absolute;
  inset: 0;
  pointer-events: none;
  background: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgQAL///8AAQUBAf9luzwAAAAASUVORK5CYII=') repeat;
  opacity: .22;
  mix-blend-mode: lighten;
  animation: noise-shift 0.6s infinite steps(2);
}

@keyframes noise-shift {
  from { transform: translate(0,0); }
  to   { transform: translate(-1px,1px); }
}

/* ====================================================================== */
/*  GIF INSIDE PORTAL                                                    */
/* ====================================================================== */
.portal-gif {
  width: 100%;
  height: 100%;
  object-fit: cover;
  filter: brightness(1.2) contrast(1.6);
  image-rendering: pixelated;
  animation: gif-breathe 10s ease-in-out infinite;
}

@keyframes gif-breathe {
  0%,100% { filter: brightness(1.1) contrast(1.5); }
  50%     { filter: brightness(1.25) contrast(1.8); }
}

/* ====================================================================== */
/*  REDUCED MOTION FALLBACK                                              */
/* ====================================================================== */
@media (prefers-reduced-motion: reduce) {
  .portal-gif,
  .portal-frame,
  .portal-noise,
  .header-title {
    animation: none !important;
  }
  .portal-noise { opacity: .25; }
}

/* ====================================================================== */
/*  NAV GRID                                                              */
/* ====================================================================== */
.big-nav {
  position: absolute;
  top: 52%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 88%;
  height: 68vh;

  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  grid-template-rows: repeat(3,1fr);
  z-index: 2;
}

/* Subtle darkened/blurred field beneath nav to stabilize against bright twinkles */
.big-nav::before {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  backdrop-filter: brightness(0.75) blur(1.2px);
  z-index: -1;
}

.big-word {
  font-family: "Cinzel", serif;
  font-size: clamp(3rem, 7vw, 7rem);
  text-decoration: none;
  color: var(--green-base);
  opacity: .42;
  align-self: center;
  justify-self: center;
  text-shadow:
    0 0 14px rgba(42,255,138,0.4),
    0 0 28px rgba(42,255,138,0.25);
  transition: all .25s ease;
}

.big-word:hover {
  opacity: 1;
  filter: brightness(2.5) contrast(2.6);
  text-shadow:
    0 0 18px var(--green-hot-1),
    0 0 36px var(--green-hot-2),
    0 0 72px var(--green-hot-3);
}

/* ====================================================================== */
/*  LOWER SPLASH                                                          */
/* ====================================================================== */
.splash {
  position: absolute;
  bottom: 3.3vh;
  left: 50%;
  transform: translateX(-50%);
  text-align: center;
  z-index: 5;
}

.splash__eyebrow {
  font-size: 1.1rem;
  letter-spacing: .15em;
  text-shadow:
    -1px -1px 0 var(--relief-base),
     0 0 8px var(--green-1),
     0 0 18px var(--green-2),
     0 0 28px var(--green-3);
}

.lede {
  font-size: 1.45rem;
  max-width: 520px;
  margin: 0.3rem auto;
  opacity: .92;
  text-shadow: 0 0 9px var(--green-1);
}

.divider {
  margin-top: .4rem;
  font-family: "Cinzel", serif;
  opacity: .7;
  text-shadow: 0 0 9px var(--green-2);
}

.splash__foot {
  font-size: 1rem;
  opacity: .9;
  letter-spacing: .12em;
}

.splash__foot a {
  color: var(--green-base);
  margin: 0 .6rem;
  text-decoration: none;
  text-shadow: 0 0 8px var(--green-1);
}

/* ====================================================================== */
/*  BACKGROUND TEXTURE + CURSOR GLOW                                      */
/* ====================================================================== */
.texture--grain {
  position: fixed;
  inset: 0;
  pointer-events: none;
  background: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgQAL///8AAQUBAf9luzwAAAAASUVORK5CYII=') repeat;
  opacity: .16;
  mix-blend-mode: soft-light;
  z-index: 0;
}

.cursor-glow {
  position: fixed;
  width: 120px;
  height: 120px;
  border-radius: 50%;
  pointer-events: none;
  background: radial-gradient(circle,
      rgba(42,255,138,0.10) 0%,
      rgba(42,255,138,0.00) 70%);
  mix-blend-mode: soft-light;
  opacity: .55;
  z-index: 50;
}

.mobile-index-nav {
  display: none;
}

@media (max-width: 768px) {
  body {
    font-size: 0.92rem;
    line-height: 1.55;
    overflow-x: hidden;
    overflow-y: auto;
  }

  .header-title {
    font-size: 1.35rem;
    letter-spacing: .16em;
    margin-top: 4vh;
    margin-bottom: 2vh;
    text-shadow:
      -1px -1px 0 var(--relief-base),
       0 0 6px var(--green-1),
       0 0 10px var(--green-2);
  }

  .portal-frame {
    position: relative;
    top: auto;
    left: 50%;
    transform: translateX(-50%);
    width: min(60vw, 32vh);
    height: min(60vw, 32vh);
    margin-top: 3vh;
    box-shadow:
      0 0 12px var(--green-1),
      0 0 22px var(--green-2);
    animation: portal-drift 30s ease-in-out infinite;
  }

  .big-nav,
  .splash,
  .portal-noise {
    display: none;
  }

  .mobile-index-nav {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 2rem;
    margin: 5vh auto 12vh;
    width: 100%;
  }

  .mobile-index-nav a {
    font-family: "Cinzel", serif;
    font-size: 0.85rem;
    letter-spacing: .18em;
    text-transform: uppercase;
    text-decoration: none;
    color: var(--green-base);
    text-shadow:
      0 0 6px var(--green-2),
      0 0 12px var(--green-3);
    opacity: .82;
    text-align: center;
  }

  .mobile-index-nav a::after {
    content: "ƒ-3";
    display: block;
    margin-top: 0.35rem;
    font-size: 0.75rem;
    letter-spacing: .28em;
    opacity: .6;
  }

  .portal-gif {
    filter: brightness(1.05) contrast(1.2);
  }
}
</style>
</head>

<body>

<div class="hero-bar" role="navigation" aria-label="Social media">
  <div class="hero-bar__inner">
    <a class="hero-bar__icon" href="https://x.com/stex_press" target="_blank" rel="noopener noreferrer" aria-label="X" title="X">
      <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round">
        <path d="M6 6l12 12M18 6L6 18" />
      </svg>
    </a>
    <a class="hero-bar__icon" href="https://ecoamericana.substack.com" target="_blank" rel="noopener noreferrer" aria-label="Substack" title="Substack">
      <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
        <path d="M7 7h10M7 12h10M7 17h10" />
      </svg>
    </a>
    <a class="hero-bar__icon" href="https://t.me/stexpeditepress" target="_blank" rel="noopener noreferrer" aria-label="Telegram" title="Telegram">
      <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false" fill="none" stroke="currentColor" stroke-width="2" stroke-linejoin="round" stroke-linecap="round">
        <path d="M21 5 3 12l7 2 2 7 9-16Z" />
        <path d="M10 14 21 5" />
      </svg>
    </a>
    <a class="hero-bar__icon" href="https://github.com/organizations/St-Expedite-Press" target="_blank" rel="noopener noreferrer" aria-label="GitHub" title="GitHub">
      <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/>
      </svg>
    </a>
  </div>
</div>

<div class="portal-mobile">
  <div class="wrap">
    <div class="mobile-fit">
      <header>
        <h1 class="title">St. Expedite Press</h1>
      </header>

      <main class="portal-stack">
        <a class="portal-link" href="books.html">Books</a>

        <div class="portal" aria-hidden="true">
          <img src="assets/gif/crow_glitch_text.gif" alt="">
        </div>

        <a class="portal-link" href="mission.html">Mission</a>

        <div class="thin-band" aria-label="Email updates">
          <form class="thin-form" id="index-updates-form">
            <input class="thin-input" id="index-updates-email" name="email" type="email" autocomplete="email" placeholder="your@email.com" aria-label="Email for updates" required>
            <button class="thin-button" type="submit">Get updates</button>
          </form>
          <div class="thin-helper" id="index-updates-helper" aria-live="polite" hidden>
            <div id="index-updates-helper-text"></div>
            <div class="thin-helper__actions">
              <a class="thin-helper__link" id="index-updates-mailto" href="mailto:editor@stexpedite.press">Open Email</a>
              <button class="thin-helper__btn" id="index-updates-copy" type="button">Copy</button>
            </div>
          </div>
        </div>
      </main>

      <footer class="foot">
        <p class="splash__eyebrow">29.9511&deg; N &mdash; 90.0715&deg; W</p>
        <p class="lede">...in the key of Night.</p>
        <div class="divider">&#9651; &#10013; &#9651;</div>
      <div class="splash__foot">
        <a href="under-construction.html">Services</a> // <a href="submit.html">Submission</a> // <a href="contact.html">Contact</a>
      </div>
    </footer>
      </div>
  </div>
</div>

<div class="portal-desktop">
  <div class="portal-flash"></div>

  <div class="header-title">ST. EXPEDITE PRESS</div>

  <!-- THE PORTAL -->
  <div class="portal-frame">
    <div class="portal-noise"></div>
    <img src="assets/gif/crow_glitch_text.gif" class="portal-gif" alt="">
  </div>

  <nav class="mobile-index-nav">
    <a href="books.html">Books</a>
    <a href="gallery.html">Store</a>
    <a href="mission.html">Mission</a>
    <a href="lab.html">Lab</a>
  </nav>

  <!-- NAVIGATION GRID -->
  <div class="big-nav">
    <!-- top row -->
    <a href="books.html"   class="big-word"                >BOOKS</a>
    <div></div>
    <a href="gallery.html" class="big-word" style="grid-column:3;">STORE</a>

    <!-- middle row (kept empty for breathing room) -->
    <div></div><div></div><div></div>

    <!-- bottom row -->
    <a href="mission.html" class="big-word" style="grid-row:3;"                    >MISSION</a>
    <div></div>
    <a href="lab.html"     class="big-word" style="grid-column:3; grid-row:3;"     >LAB</a>
  </div>

  <!-- LOWER TEXT -->
  <div class="splash">
    <p class="splash__eyebrow">29.9511&deg; N &mdash; 90.0715&deg; W</p>
    <p class="lede">...in the key of Night.</p>
    <div class="divider">&#9651; &#10013; &#9651;</div>
    <div class="splash__foot">
      <a href="under-construction.html">Services</a> // <a href="submit.html">Submission</a> // <a href="contact.html">Contact</a>
    </div>
  </div>
</div>

<div class="texture--grain"></div>
<div class="cursor-glow"></div>

<script>
/* CURSOR GLOW FOLLOW */
if (window.matchMedia('(pointer: fine)').matches) {
  document.addEventListener('mousemove', e => {
    const glow = document.querySelector('.cursor-glow');
    if (!glow) return;
    glow.style.left = (e.pageX - 60) + 'px';
    glow.style.top  = (e.pageY - 60) + 'px';
  });

  document.addEventListener('mousemove', e => {
    const portal = document.querySelector('.portal-frame');
    if (!portal) return;

    const rect = portal.getBoundingClientRect();
    const cx = rect.left + rect.width / 2;
    const cy = rect.top + rect.height / 2;

    const dx = (e.pageX - cx) / rect.width;
    const dy = (e.pageY - cy) / rect.height;

    const warpX = (dx * 1.8);
    const warpY = (dy * 1.8);

    portal.style.transform =
      `translate(-50%, -50%)
       rotate(${warpX * 0.9}deg)
       skew(${warpX}deg, ${warpY}deg)`;
  });
}

const applyMobileFit = () => {
  const mobileFit = document.querySelector('.portal-mobile .mobile-fit');
  const mobileWrap = document.querySelector('.portal-mobile .wrap');
  if (!mobileFit || !mobileWrap) return;

  const isMobileLayout = window.matchMedia('(max-width: 900px)').matches;
  if (!isMobileLayout) {
    mobileFit.style.removeProperty('--mobile-fit-scale');
    return;
  }

  mobileFit.style.setProperty('--mobile-fit-scale', '1');
  const availableWidth = mobileWrap.clientWidth;
  const availableHeight = mobileWrap.clientHeight;

  const contentWidth = mobileFit.scrollWidth;
  const contentHeight = mobileFit.scrollHeight;

  if (!contentWidth || !contentHeight) return;

  const scale = Math.min(1, availableWidth / contentWidth, availableHeight / contentHeight);
  mobileFit.style.setProperty('--mobile-fit-scale', String(Math.max(0.65, scale)));
};

let mobileFitTimer = 0;
const scheduleMobileFit = (delayMs) => {
  window.clearTimeout(mobileFitTimer);
  mobileFitTimer = window.setTimeout(applyMobileFit, delayMs);
};

scheduleMobileFit(0);
window.addEventListener('resize', () => scheduleMobileFit(60), { passive: true });
window.addEventListener('orientationchange', () => scheduleMobileFit(250), { passive: true });
window.addEventListener('load', () => scheduleMobileFit(0), { passive: true });
document.fonts?.ready?.then?.(() => scheduleMobileFit(0));

const updatesForm = document.getElementById('index-updates-form');
const updatesHelper = document.getElementById('index-updates-helper');
const updatesHelperText = document.getElementById('index-updates-helper-text');
const updatesMailto = document.getElementById('index-updates-mailto');
const updatesCopy = document.getElementById('index-updates-copy');

if (updatesForm && updatesHelper && updatesHelperText && updatesMailto && updatesCopy) {
  let lastCopyText = '';

  async function copyText(text) {
    try {
      await navigator.clipboard.writeText(text);
      return true;
    } catch {
      try {
        window.prompt('Copy this message:', text);
      } catch {}
      return false;
    }
  }

  updatesForm.addEventListener('submit', (e) => {
    e.preventDefault();
    const email = String(document.getElementById('index-updates-email')?.value ?? '').trim();
    if (!email) {
      updatesHelper.hidden = false;
      updatesHelperText.textContent = 'Enter your email, then try again.';
      updatesMailto.setAttribute('href', 'mailto:editor@stexpedite.press');
      lastCopyText = '';
      return;
    }

    const subject = 'St. Expedite Press — Updates';
    const lines = [
      'Please add me to updates.',
      '',
      `Email: ${email}`,
    ];

    const body = lines.join('\n');
    const mailtoUrl =
      `mailto:editor@stexpedite.press?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;

    updatesHelper.hidden = false;
    updatesHelperText.textContent = 'Opening your email client. If nothing happens, use the buttons below.';
    updatesMailto.setAttribute('href', mailtoUrl);
    lastCopyText = `To: editor@stexpedite.press\nSubject: ${subject}\n\n${body}`;

    window.location.href = mailtoUrl;
  });

  updatesCopy.addEventListener('click', async () => {
    if (!lastCopyText) return;
    const ok = await copyText(lastCopyText);
    updatesHelper.hidden = false;
    updatesHelperText.textContent = ok ? 'Copied. Paste into your email client and send to editor@stexpedite.press.' : 'Copy dialog opened.';
  });
}

</script>

</body>
</html>
